# ğŸ¯ Influencer Marketing Research Agent æ¶æ„åˆ†æ

## ğŸ“‹ ç³»ç»Ÿæ¦‚è§ˆ

åŸºäº **LangGraph** çš„**æ¨¡å—åŒ–å¹¶å‘ç ”ç©¶ä»£ç†ç³»ç»Ÿ**ï¼Œä¸“é—¨é’ˆå¯¹**ç½‘çº¢è¥é”€åœºæ™¯**ä¼˜åŒ–ã€‚é‡‡ç”¨**ç›‘ç£è€…-ç ”ç©¶å‘˜æ¨¡å¼**ï¼Œæ”¯æŒçœŸæ­£çš„å¹¶å‘æ‰§è¡Œå’Œæ™ºèƒ½èµ„æºç®¡ç†ã€‚

### ğŸ—ï¸ æ¨¡å—åŒ–æ¶æ„

```
ä¸»å·¥ä½œæµ (nodes.py)          ç›‘ç£å±‚ (supervisor.py)       æ‰§è¡Œå±‚ (researcher.py)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ç”¨æˆ·äº¤äº’ & æµç¨‹ç¼–æ’    â”€â”€â†’   ç ”ç©¶ä»»åŠ¡è§„åˆ’ & åè°ƒ   â”€â”€â†’   å¹¶å‘ç ”ç©¶ & ç»“æœåˆæˆ
é…ç½®é©±åŠ¨ & é”™è¯¯å¤„ç†          èµ„æºç®¡ç† & è´Ÿè½½å‡è¡¡          å·¥å…·æ‰§è¡Œ & æ™ºèƒ½å‹ç¼©
```

## ğŸ“ æ ¸å¿ƒæ¨¡å—åˆ†æ

### 1. **graph.py** - ä¸»å·¥ä½œæµç¼–æ’å™¨

**èŒè´£**: å®šä¹‰é¡¶å±‚ç ”ç©¶æµç¨‹å’ŒèŠ‚ç‚¹è¿æ¥å…³ç³»

```python
# å®Œæ•´ç ”ç©¶åˆ°æŠ¥å‘Šæµç¨‹
START â†’ clarify_with_user â†’ write_research_brief â†’ research_supervisor â†’ final_report_generation â†’ END
```

**å…³é”®ç‰¹å¾**:
- âœ… **é…ç½®é©±åŠ¨**: é€šè¿‡ `Configuration` æ§åˆ¶èŠ‚ç‚¹è¡Œä¸º
- âœ… **æ¡ä»¶è·¯ç”±**: ä½¿ç”¨ `Command` å®ç°åŠ¨æ€è·³è½¬é€»è¾‘
- âœ… **çŠ¶æ€ç±»å‹å®‰å…¨**: æ˜ç¡®çš„è¾“å…¥/è¾“å‡ºçŠ¶æ€å®šä¹‰
- âœ… **å®Œæ•´æµç¨‹**: 4ä¸ªæ ¸å¿ƒèŠ‚ç‚¹ï¼Œä»ç ”ç©¶åˆ°æœ€ç»ˆæŠ¥å‘Šçš„ç«¯åˆ°ç«¯workflow

**è®¾è®¡äº®ç‚¹**:
```python
# å¯è·³è¿‡çš„æ¾„æ¸…èŠ‚ç‚¹
if not configurable.allow_clarification:
    return Command(goto="write_research_brief")

# åŸºäºLangGraph Commandçš„æ™ºèƒ½è·¯ç”±
return Command(goto="research_supervisor", update={...})
```

### 2. **state.py** - ç»Ÿä¸€çŠ¶æ€ç®¡ç†

**èŒè´£**: å®šä¹‰æ‰€æœ‰çŠ¶æ€ç±»å’Œæ•°æ®æµç®¡ç†

**å®Œæ•´çŠ¶æ€æ¶æ„**:
```
ä¸»å·¥ä½œæµçŠ¶æ€:
â”œâ”€â”€ InfluencerSearchState (ä¸»çŠ¶æ€)
    â”œâ”€â”€ MessagesState (ä¼šè¯å†å²)
    â”œâ”€â”€ research_brief (ç ”ç©¶æ‘˜è¦) 
    â”œâ”€â”€ supervisor_messages (ç›‘ç£å¯¹è¯)
    â”œâ”€â”€ notes (ç ”ç©¶å‘ç°ç´¯ç§¯)
    â”œâ”€â”€ final_report (æœ€ç»ˆç»¼åˆæŠ¥å‘Š)
    â””â”€â”€ error handling (é”™è¯¯çŠ¶æ€)

å­å›¾çŠ¶æ€:
â”œâ”€â”€ SupervisorState (ç›‘ç£çŠ¶æ€)
â”œâ”€â”€ ResearcherState (ç ”ç©¶å‘˜çŠ¶æ€)  
â”œâ”€â”€ ResearcherInputState/OutputState (æ¥å£å®šä¹‰)
â””â”€â”€ override_reducer (çŠ¶æ€æ›´æ–°å‡½æ•°)
```

**è®¾è®¡ç‰¹ç‚¹**:
- âœ… **ç»Ÿä¸€ç®¡ç†**: æ‰€æœ‰TypedDictçŠ¶æ€é›†ä¸­å®šä¹‰
- âœ… **ç±»å‹å®‰å…¨**: å®Œæ•´çš„ç±»å‹æ³¨è§£å’ŒéªŒè¯
- âœ… **çŠ¶æ€éš”ç¦»**: ä¸åŒå±‚çº§çŠ¶æ€äº’ä¸å¹²æ‰°

### 3. **schemas.py** - æ•°æ®æ¨¡å‹å®šä¹‰

**èŒè´£**: å®šä¹‰Pydanticä¸šåŠ¡æ¨¡å‹å’ŒLLMç»“æ„åŒ–è¾“å‡º

**ä¸šåŠ¡æ¨¡å‹**:
```
ç”¨æˆ·äº¤äº’æ¨¡å‹:
â”œâ”€â”€ ClarifyWithUser (æ¾„æ¸…éœ€æ±‚)
â”œâ”€â”€ InfluencerResearchBrief (ç ”ç©¶æ‘˜è¦)
    â”œâ”€â”€ target_platforms (ç›®æ ‡å¹³å°)
    â”œâ”€â”€ niche_focus (ç»†åˆ†é¢†åŸŸ)  
    â”œâ”€â”€ campaign_objectives (è¥é”€ç›®æ ‡)
    â””â”€â”€ 8+ ä¸“ä¸šå­—æ®µ

å·¥å…·æ¨¡å‹:
â”œâ”€â”€ ConductInfluencerResearch (ç ”ç©¶å§”æ‰˜)
â”œâ”€â”€ InfluencerResearchComplete (å®Œæˆä¿¡å·)
â””â”€â”€ ResearchComplete (ä»»åŠ¡å®Œæˆ)
```

**è®¾è®¡ç‰¹ç‚¹**:
- âœ… **é¢†åŸŸä¸“ä¸šåŒ–**: é’ˆå¯¹ç½‘çº¢è¥é”€åœºæ™¯ä¼˜åŒ–
- âœ… **ç»“æ„åŒ–è¾“å‡º**: ç¡®ä¿LLMè¾“å‡ºæ ¼å¼æ­£ç¡®
- âœ… **çº¯æ•°æ®æ¨¡å‹**: ä¸“æ³¨ä¸šåŠ¡æ•°æ®ï¼Œä¸åŒ…å«çŠ¶æ€ç±»

### 4. **prompts.py** - æç¤ºå·¥ç¨‹

**èŒè´£**: æä¾›ä¸“ä¸šåŒ–æç¤ºæ¨¡æ¿å’Œå·¥å…·å®šä¹‰

**æ ¸å¿ƒæç¤ºæ¨¡æ¿**:
- æ¾„æ¸…ç³»ç»Ÿ (`CLARIFY_WITH_USER_INSTRUCTIONS`)
- ç ”ç©¶æ‘˜è¦ç”Ÿæˆ (`TRANSFORM_MESSAGES_INTO_INFLUENCER_RESEARCH_BRIEF_PROMPT`)
- ç›‘ç£æŒ‡ä»¤ (`INFLUENCER_RESEARCH_SUPERVISOR_PROMPT`)
- ç ”ç©¶å‘˜ç³»ç»Ÿæç¤ºå’Œå‹ç¼©æŒ‡ä»¤
- å·¥å…·å®šä¹‰ (`think_tool`, æ¶ˆæ¯å¤„ç†å·¥å…·ç­‰)

### 5. **nodes.py** - ä¸»å·¥ä½œæµèŠ‚ç‚¹

**èŒè´£**: å®ç°æ ¸å¿ƒä¸šåŠ¡æµç¨‹èŠ‚ç‚¹å’Œå­å›¾é›†æˆ

**ä¸»å·¥ä½œæµèŠ‚ç‚¹**:
```
â”œâ”€â”€ clarify_with_user (æ¾„æ¸…éœ€æ±‚)
â”œâ”€â”€ write_research_brief (ç”Ÿæˆç ”ç©¶æ‘˜è¦)
â”œâ”€â”€ final_report_generation (ç»¼åˆæŠ¥å‘Šç”Ÿæˆ)
â””â”€â”€ å­å›¾å¯¼å…¥ (supervisor_subgraph, researcher_subgraph)
```

**è®¾è®¡ç‰¹ç‚¹**:
- âœ… **èŒè´£å•ä¸€**: åªåŒ…å«ä¸»å·¥ä½œæµé€»è¾‘
- âœ… **æ¨¡å—é›†æˆ**: é€šè¿‡å¯¼å…¥æ–¹å¼ä½¿ç”¨å­å›¾
- âœ… **ç²¾ç®€é«˜æ•ˆ**: ä»~1000è¡Œç²¾ç®€åˆ°~350è¡Œ

### 6. **supervisor.py** - ç›‘ç£å­å›¾

**èŒè´£**: ç ”ç©¶ä»»åŠ¡è§„åˆ’ã€åè°ƒå’Œèµ„æºç®¡ç†

**æ ¸å¿ƒç»„ä»¶**:
```
â”œâ”€â”€ supervisor (ç ”ç©¶ç­–ç•¥è§„åˆ’)
â”œâ”€â”€ supervisor_tools (å·¥å…·æ‰§è¡Œå’Œä»»åŠ¡åˆ†å‘)
â””â”€â”€ supervisor_subgraph (ç¼–è¯‘çš„ç›‘ç£å­å›¾)
```

**å¹¶å‘è°ƒåº¦æœºåˆ¶**:
```python
# å¹¶å‘ç ”ç©¶ä»»åŠ¡åˆ†å‘
research_tasks = [
    researcher_subgraph.ainvoke({
        "researcher_messages": [HumanMessage(content=topic)],
        "research_topic": topic,
        "tool_call_iterations": 0
    }, config) for topic in research_topics
]
tool_results = await asyncio.gather(*research_tasks)
```

### 7. **researcher.py** - ç ”ç©¶æ‰§è¡Œå­å›¾

**èŒè´£**: å…·ä½“ç ”ç©¶æ‰§è¡Œã€å·¥å…·ç®¡ç†å’Œç»“æœå‹ç¼©

**æ ¸å¿ƒç»„ä»¶**:
```
ç ”ç©¶æ‰§è¡Œ:
â”œâ”€â”€ researcher (ç‹¬ç«‹ç ”ç©¶é€»è¾‘)
â”œâ”€â”€ researcher_tools (å¹¶å‘å·¥å…·æ‰§è¡Œ)
â”œâ”€â”€ compress_research (æ™ºèƒ½å‹ç¼©)

å·¥å…·ç®¡ç†:
â”œâ”€â”€ get_all_tools (å·¥å…·è£…é…)
â”œâ”€â”€ execute_tool_safely (å®‰å…¨æ‰§è¡Œ)
â”œâ”€â”€ SearchAPI (æœç´¢é›†æˆ)
â””â”€â”€ researcher_subgraph (ç¼–è¯‘çš„ç ”ç©¶å­å›¾)
```

**å·¥å…·çº§å¹¶å‘**:
```python
# å¹¶å‘å·¥å…·æ‰§è¡Œ
tool_execution_tasks = [
    execute_tool_safely(tools_by_name[tool_call["name"]], args, config)
    for tool_call in tool_calls
]
observations = await asyncio.gather(*tool_execution_tasks)
```

## âš¡ å¹¶å‘æ‰§è¡Œæœºåˆ¶

### ğŸ¯ ä¸¤å±‚å¹¶å‘æ¶æ„

**Supervisorå±‚**: å¹¶å‘åˆ†å‘å¤šä¸ªç ”ç©¶ä»»åŠ¡åˆ°researcher_subgraph
**Researcherå±‚**: å•ä¸ªç ”ç©¶ä»»åŠ¡å†…çš„å¹¶å‘å·¥å…·æ‰§è¡Œ

### ğŸ›¡ï¸ èµ„æºç®¡ç†

- **å¹¶å‘é™åˆ¶**: `max_concurrent_research_units` é˜²æ­¢èµ„æºè€—å°½
- **è¿­ä»£æ§åˆ¶**: `max_researcher_iterations` å’Œ `max_react_tool_calls`
- **æº¢å‡ºå¤„ç†**: è¶…å‡ºé™åˆ¶çš„ä»»åŠ¡ä¼˜é›…é™çº§

## ğŸ”„ çŠ¶æ€ç®¡ç†

### ğŸ“Š çŠ¶æ€æµè½¬

```
Main: messages â†’ research_brief â†’ supervisor_messages â†’ final_report
Supervisor: research_brief â†’ research_iterations â†’ notes  
Researcher: research_topic â†’ tool_calls â†’ compressed_research
```

### ğŸ›ï¸ æ›´æ–°æ¨¡å¼

- **ç´¯åŠ æ¨¡å¼**: æ¶ˆæ¯è¿½åŠ  (`operator.add`)
- **è¦†ç›–æ¨¡å¼**: çŠ¶æ€æ›¿æ¢ (`override_reducer`)

## ğŸ› ï¸ é”™è¯¯å¤„ç†

**å¤šå±‚é”™è¯¯æ¢å¤**:
- é…ç½®å±‚: ä¼˜é›…é™çº§å’Œé»˜è®¤å€¼
- æ¨¡å‹å±‚: Tokené™åˆ¶å¤„ç†å’Œé‡è¯•
- å·¥å…·å±‚: å®‰å…¨æ‰§è¡Œå’Œé”™è¯¯éš”ç¦»
- å¹¶å‘å±‚: éƒ¨åˆ†å¤±è´¥å®¹å¿

## âš™ï¸ é…ç½®ç®¡ç†

**æ ¸å¿ƒé…ç½®é¡¹**:
- ç ”ç©¶é…ç½®: `research_model`, `max_concurrent_research_units`, `max_researcher_iterations`
- å·¥å…·é…ç½®: `mcp_prompt`, `search_api`, `max_react_tool_calls`
- æŠ¥å‘Šé…ç½®: `final_report_model`, `enable_final_report`

**æ‰©å±•ç‚¹**:
- å·¥å…·æ‰©å±•: æœç´¢APIã€MCPå·¥å…·é›†æˆ
- æ¨¡å‹æ‰©å±•: å¯é…ç½®çš„æ¨¡å‹é€‰æ‹©
- çŠ¶æ€æ‰©å±•: TypedDictå­—æ®µè½»æ¾æ·»åŠ 

## ğŸ† è®¾è®¡ä¼˜åŠ¿

### ğŸ’ª æ ¸å¿ƒä¼˜åŠ¿

**1. æ¨¡å—åŒ–æ¶æ„**:
- æ¸…æ™°çš„èŒè´£åˆ†ç¦» (7ä¸ªç‹¬ç«‹æ¨¡å—)
- æ˜“äºç»´æŠ¤å’Œæ‰©å±•
- ä»£ç å¤ç”¨å’Œæµ‹è¯•å‹å¥½

**2. å¹¶å‘æ‰§è¡Œ**:
- çœŸæ­£çš„å¹¶è¡Œå¤„ç†èƒ½åŠ›
- æ™ºèƒ½èµ„æºç®¡ç†å’Œè´Ÿè½½å‡è¡¡
- 40-70% æ€§èƒ½æå‡æ½œåŠ›

**3. é¢†åŸŸä¸“ä¸šåŒ–**:
- é’ˆå¯¹ç½‘çº¢è¥é”€åœºæ™¯ä¼˜åŒ–
- ä¸“ä¸šåŒ–çš„æ•°æ®æ¨¡å‹å’Œæç¤ºå·¥ç¨‹
- 8+ ä¸ªè¡Œä¸šä¸“ç”¨å­—æ®µ

**4. ä¼ä¸šçº§ç‰¹æ€§**:
- å®Œæ•´çš„é”™è¯¯å¤„ç†å’Œæ¢å¤æœºåˆ¶
- é…ç½®é©±åŠ¨çš„è¿è¡Œæ—¶è¡Œä¸º
- ç”Ÿäº§å°±ç»ªçš„å®‰å…¨æ€§å’Œå¯è§‚æµ‹æ€§

## ğŸ“ æ€»ç»“

è¿™ä¸ª **Influencer Marketing Research Agent** æ˜¯ä¸€ä¸ª**æ¨¡å—åŒ–ã€é«˜æ€§èƒ½**çš„å¹¶å‘ç ”ç©¶ç³»ç»Ÿï¼š

âœ… **æ¨¡å—åŒ–æ¶æ„**: 7ä¸ªç‹¬ç«‹æ¨¡å—ï¼ŒèŒè´£æ¸…æ™°åˆ†ç¦»  
âœ… **å¹¶å‘æ‰§è¡Œ**: ç›‘ç£è€…-ç ”ç©¶å‘˜æ¨¡å¼ï¼ŒçœŸæ­£çš„å¹¶è¡Œå¤„ç†  
âœ… **é¢†åŸŸä¸“ä¸šåŒ–**: é’ˆå¯¹ç½‘çº¢è¥é”€åœºæ™¯æ·±åº¦ä¼˜åŒ–  
âœ… **ä¼ä¸šçº§ç‰¹æ€§**: å®Œæ•´çš„é”™è¯¯å¤„ç†ã€é…ç½®ç®¡ç†ã€å¯æ‰©å±•æ€§

### ğŸ”® æ‰©å±•å»ºè®®

**çŸ­æœŸ**: çœŸå®APIé›†æˆ (Tavily, Google)ã€MCPå·¥å…·é›†æˆã€ç¼“å­˜å±‚  
**ä¸­æœŸ**: æ•°æ®æŒä¹…åŒ–ã€ç”¨æˆ·ç•Œé¢ã€APIæ ‡å‡†åŒ–  
**é•¿æœŸ**: AIå¢å¼ºã€å®æ—¶ç›‘æ§ã€ä¼ä¸šé›†æˆ

---

## ğŸ“‚ æ–‡ä»¶ç»“æ„

```
influencer_search/
â”œâ”€â”€ graph.py              # ä¸»å·¥ä½œæµç¼–æ’å™¨
â”œâ”€â”€ state.py              # ç»Ÿä¸€çŠ¶æ€ç®¡ç† (æ‰€æœ‰TypedDictçŠ¶æ€)
â”œâ”€â”€ schemas.py            # æ•°æ®æ¨¡å‹å®šä¹‰ (çº¯Pydanticæ¨¡å‹)
â”œâ”€â”€ prompts.py            # æç¤ºå·¥ç¨‹æ¨¡æ¿
â”œâ”€â”€ nodes.py              # ä¸»å·¥ä½œæµèŠ‚ç‚¹ (~350è¡Œ)
â”œâ”€â”€ supervisor.py         # ç›‘ç£å­å›¾ (ç ”ç©¶åè°ƒ)
â”œâ”€â”€ researcher.py         # ç ”ç©¶æ‰§è¡Œå­å›¾ (å·¥å…·ç®¡ç†)
â””â”€â”€ ARCHITECTURE_ANALYSIS.md  # æœ¬æ–‡æ¡£
```

**é‡æ„æˆæœ**: ä»å•ä¸€1000è¡Œæ–‡ä»¶é‡æ„ä¸º7ä¸ªèŒè´£æ˜ç¡®çš„æ¨¡å—ï¼Œå¤§å¹…æå‡å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚

---

*æ–‡æ¡£ç‰ˆæœ¬: v2.0*  
*æœ€åæ›´æ–°: æ¨¡å—åŒ–é‡æ„å®Œæˆ - SuperClaude*